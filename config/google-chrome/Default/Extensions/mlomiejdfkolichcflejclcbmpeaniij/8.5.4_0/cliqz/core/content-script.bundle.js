/*! For license information please see content-script.bundle.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=16)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContentScript=function(e){if(void 0===e.module)return void o.default.error('"module" property should be specified in content.es',e);if(!1===Array.isArray(e.js))return void o.default.error('"js" should be an array of functions',e);if(!1===Array.isArray(e.matches))return void o.default.error('"matches" should be an array of match patterns',e);if(void 0!==e.excludeMatches&&!1===Array.isArray(e.excludeMatches))return void o.default.error('"excludeMatches" should either be undefined or an array of match patterns',e);g.push(e)},t.runContentScripts=function(e,t,r){const n={};var s,a=u(g);try{for(a.s();!(s=a.n()).done;){const a=s.value,m=a.module,g=a.js;if((r.app.modules[m]||{isEnabled:!1}).isEnabled&&d(e,a)){var i,l=u(g);try{for(l.s();!(i=l.n()).done;){const s=i.value;try{const o=s(e,t,r)||{};n[m]=c({},n[m],{},o)}catch(e){o.default.error(`CLIQZ content-script failed: ${e} ${e.stack}`)}}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){a.e(e)}finally{a.f()}return n};var n=a(r(20)),s=r(14),o=a(r(21));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!1===(0,s.isTopWindow)(e)&&!0!==t.allFrames)return!1;let r=e.location.href;if("about:blank"===r||"about:srcdoc"===r){if(!0!==t.matchAboutBlank)return!1;if(!e.parent)return!1;r=e.parent.location.href}if(void 0!==t.excludeMatches){var o,a=u(t.excludeMatches);try{for(a.s();!(o=a.n()).done;){const e=o.value;if((0,n.default)(e,r))return!1}}catch(e){a.e(e)}finally{a.f()}}var i,c=u(t.matches);try{for(c.s();!(i=c.n()).done;){const e=i.value;if((0,n.default)(e,r))return!0}}catch(e){c.e(e)}finally{c.f()}return!1}const g=[]},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=r(24))&&n.__esModule?n:{default:n};var o=("undefined"!=typeof browser?browser:s.default).runtime;t.default=o},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));class n{constructor(e){this.cb=e,this.knownIds=new Set,this.knownHrefs=new Set,this.knownClasses=new Set,this.observer=null}queryAll(e){this.handleNewNodes(Array.from(e.document.querySelectorAll("[id],[class],[href]")))}start(e){null===this.observer&&void 0!==e.MutationObserver&&(this.observer=new e.MutationObserver(e=>{this.handleNewNodes(function(e){const t=[];for(let r=0;r<e.length;r+=1){const n=e[r];if("attributes"===n.type)t.push(n.target);else if("childList"===n.type){const e=n.addedNodes;for(let r=0;r<e.length;r+=1){const n=e[r];if(t.push(n),void 0!==n.querySelectorAll){const e=n.querySelectorAll("[id],[class],[href]");for(let r=0;r<e.length;r+=1)t.push(e[r])}}}}return t}(e))}),this.observer.observe(e.document.documentElement,{attributeFilter:["class","id","href"],attributes:!0,childList:!0,subtree:!0}))}stop(){null!==this.observer&&(this.observer.disconnect(),this.observer=null)}handleNewFeatures({hrefs:e,ids:t,classes:r}){const n=[],s=[],o=[];for(let e=0;e<t.length;e+=1){const r=t[e];!1===this.knownIds.has(r)&&(n.push(r),this.knownIds.add(r))}for(let e=0;e<r.length;e+=1){const t=r[e];!1===this.knownClasses.has(t)&&(s.push(t),this.knownClasses.add(t))}for(let t=0;t<e.length;t+=1){const r=e[t];!1===this.knownHrefs.has(r)&&(o.push(r),this.knownHrefs.add(r))}return(0!==n.length||0!==s.length||0!==o.length)&&(this.cb({classes:s,hrefs:o,ids:n}),!0)}handleNewNodes(e){return this.handleNewFeatures(function(e){const t=new Set(["br","head","link","meta","script","style"]),r=new Set,n=new Set,s=new Set;for(let o=0;o<e.length;o+=1){const a=e[o];if(1!==a.nodeType)continue;if(void 0!==a.localName&&t.has(a.localName))continue;const i=a.id;i&&s.add(i);const c=a.classList;if(c)for(let e=0;e<c.length;e+=1)r.add(c[e]);const l=a.href;"string"==typeof l&&n.add(l)}return{classes:Array.from(r),hrefs:Array.from(n),ids:Array.from(s)}}(e))}}function s(e,t){const r=t.head||t.getElementsByTagName("head")[0]||t.documentElement;if(null!==r){const n=t.createElement("style");n.type="text/css",n.id="cliqz-adblokcer-css-rules",n.appendChild(t.createTextNode(e)),r.appendChild(n)}}function o(e,t){const r=t.createElement("script");r.type="text/javascript",r.id="cliqz-adblocker-script",r.async=!1,r.appendChild(t.createTextNode(function(e){return`try{${e}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`}(e)));const n=t.head||t.documentElement;null!==n&&n.appendChild(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"setInterval",{enumerable:!0,get:function(){return n.setInterval}}),Object.defineProperty(t,"setTimeout",{enumerable:!0,get:function(){return n.setTimeout}}),Object.defineProperty(t,"clearTimeout",{enumerable:!0,get:function(){return n.clearTimeout}}),Object.defineProperty(t,"clearInterval",{enumerable:!0,get:function(){return n.clearInterval}});var n=r(27)},,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTopWindow=function(e){return e.self===e.top},t.documentBodyReady=function(){if(window.document&&window.document.body)return Promise.resolve();return new Promise(e=>{window.addEventListener("DOMContentLoaded",e,{once:!0})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=t.chrome=void 0;const n="undefined"!=typeof browser?browser:chrome;t.chrome=n;const s=window;t.window=s},function(e,t,r){"use strict";r(17)},function(e,t,r){"use strict";var n;r(18),(0,((n=r(35))&&n.__esModule?n:{default:n}).default)()},function(e,t,r){"use strict";r(19),r(23),r(29),r(30),r(33),r(34)},function(e,t,r){"use strict";var n=r(14);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){const r=[];if(window.parent!==window&&window.document&&window.document.scripts)for(let e=0;e<window.document.scripts.length;e+=1){const t=window.document.scripts[e].src;t.startsWith("http")&&r.push(t)}let n=e.target;1!==n.nodeType&&(n=n.parentNode);let s=null;n.closest("a[href]")&&(s=n.closest("a[href]").getAttribute("href"));const o={target:{baseURI:e.target.baseURI,value:e.target.value,href:e.target.href,parentNode:{href:e.target.parentNode?e.target.parentNode.href:null},linksSrc:r}};t.app.modules.core.action("recordMouseDown",o,function(e){let t,r=e.target;try{for(let e=0;e<5;e+=1){if(t=r.innerHTML,-1!==t.indexOf("http://")||-1!==t.indexOf("https://"))return t;r=r.parentNode,e+=1}}catch(e){}}(e),s)}function c(){return window.document.documentElement.outerHTML}function l(e){const t=window.document.querySelector(e);try{return t.click(),!0}catch(e){return!1}}function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.shadowRootSelector,s=void 0===n?null:n,a=r.attributeType,i=void 0===a?"property":a;const c=s?window.document.querySelector(s).shadowRoot:window.document,l=t.split(","),u=(e,t)=>"property"===i?e[t]:e.getAttribute(t);return Array.prototype.map.call(c.querySelectorAll(e),e=>l.length>1?l.reduce((t,r)=>o({},t,{[r]:u(e,r)}),{}):u(e,t))}function m(e){const t=window.document;return Array.prototype.map.call(t.querySelectorAll(e),e=>window.getComputedStyle(e))}(0,r(0).registerContentScript)({module:"core",matches:["<all_urls>"],allFrames:!0,matchAboutBlank:!0,js:[(e,t,r)=>{const s=e=>{i(e,r)};e.addEventListener("mousedown",s);const o=()=>{!function(e,t){if(!(0,n.isTopWindow)(e))return;const r=e.document.getElementsByTagName("html").item(0).getAttribute("lang"),s=e.document.querySelector("title"),o=e.document.querySelector("meta[name=description]"),a=e.document.querySelector('meta[property="og:title"]'),i=e.document.querySelector('meta[property="og:description"]'),c=e.document.querySelector('meta[property="og:image"]');t.app.modules.core.action("recordMeta",e.location.href,{title:s&&s.innerHTML,description:o&&o.content,ogTitle:a&&a.content,ogDescription:i&&i.content,ogImage:c&&c.content,lang:r})}(e,r)};return e.addEventListener("DOMContentLoaded",o),e.addEventListener("unload",()=>{e.removeEventListener("mousedown",s),e.removeEventListener("DOMContentLoaded",o)},{once:!0}),{getHTML:c,click:l,queryHTML:u,queryComputedStyle:m}}]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const r=new URL(t),a=r.protocol,i=r.hostname,c=r.pathname,l=r.search,u=function(e){if("<all_urls>"===e)return{scheme:n,host:null,path:null};const t=e.indexOf("://");if(-1===t)throw new Error('<scheme> missing, "://" not found');const r=e.slice(0,t),a=function(e){if("*"===e)return new Set(["http","https","ws","wss"]);if(n.has(e))return new Set([e]);throw new Error("<scheme> is not valid: "+e)}(r),i=e.indexOf("/",t+3);if(-1===i)throw new Error('<path> missing, "/" not found');const c=e.slice(t+3,i),l=function(e,t){if(t.includes(":"))throw new Error("<host> must not include a port number");if(0===t.length){if("file"===e)return/^$/;throw new Error('<host> is optional only if the scheme is "file"')}const r=t.lastIndexOf("*");if(-1!==r){if("*"===t)return null;if(0!==r)throw new Error("<host> wildcard may only appear at the start");if("."!==t[1])throw new Error('<host> only "*" and "*." followed by hostname parts are valid');const e=t.slice(2);if(!1===s.test(e))throw new Error("<host> contains invalid characters");return new RegExp(`^(?:.*[.])?${o(e)}$`)}if(!1===s.test(t))throw new Error("<host> contains invalid characters");return new RegExp(`^${o(t)}$`)}(r,c),u=function(e){return new RegExp(`^${o(e)}$`)}(e.slice(i+1));return{scheme:a,host:l,path:u}}(e);if(!1===u.scheme.has(a.slice(0,a.length-1)))return!1;if(null!==u.host&&!1===u.host.test(i))return!1;if(null!==u.path&&!1===u.path.test(`${c.slice(1)}${l}`))return!1;return!0};const n=new Set(["http","https","ws","wss","ftp","ftps","data","file"]),s=/^[.\w_-]+$/;function o(e){return e.replace(/([|.$+?{}()[\]\\])/g,"\\$1").replace(/\*/g,".*")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=r(15);function o(){}var a="development"===((n=r(22))&&n.__esModule?n:{default:n}).default.environment?s.window.console:new Proxy({},{get:()=>o});t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={platform:"webextension",brocfile:"Brocfile.ghostery.js",baseURL:"/cliqz/",pack:"npm pack",publish:'echo "Uploading version: browser-core-$PACKAGE_VERSION.tgz" && aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH/latest.tgz --acl public-read',sourceMaps:!1,format:"common",settings:{ANOLYSIS_BACKEND_URL:"https://anolysis.privacy.ghostery.net",ANOLYSIS_STAGING_BACKEND_URL:"https://anolysis-staging.privacy.ghostery.net",BACKGROUND_IMAGE_URL:"https://cdn.ghostery.net/brands-database/database/",BW_URL:"https://antiphishing.ghostery.net/api/v1/",CDN_BASEURL:"https://cdn.ghostery.net",ADBLOCKER_BASE_URL:"https://cdn.ghostery.com/adblocker/configs",ANTITRACKING_BASE_URL:"https://cdn.ghostery.com/antitracking",CONFIG_PROVIDER:"https://api.ghostery.net/api/v1/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_HPNV2_DIRECT:"https://collector-hpn.ghostery.net",ENDPOINT_HPNV2_ANONYMOUS:"https://collector-hpn.ghostery.net",ENDPOINT_HUMAN_WEB_PATTERNS:"https://cdn2.ghostery.com/human-web-chromium/hw-patterns.gz",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.privacy.ghostery.net/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.privacy.ghostery.net/config",FEEDBACK:"https://ghostery.net/feedback/",HB_NEWS:"hb-news.ghostery.net",OFFERS_BE_BASE_URL:"https://offers-api.ghostery.net",OFFERS_STAGING_BASE_URL:"https://offers-api-staging-myo.myoffrz.ninja",PRIVACY_SCORE_URL:"https://anti-tracking.ghostery.net/api/v1/score?",TRACKER_SCORE_URL:"https://cdn.ghostery.net/privacy-score/privacy_score.json",RESULTS_PROVIDER:"https://api.ghostery.net/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.ghostery.net/api/v1/logging?q=",RICH_HEADER:"https://api.ghostery.net/api/v2/rich-header?path=/v2/map",ROTATED_TOP_NEWS:"rotated-top-news.ghostery.net",SAFE_BROWSING:"https://safe-browsing.ghostery.net",STATISTICS:"https://stats.ghostery.net",SUGGESTIONS_URL:"https://ghostery.net/search?q=",UNINSTALL:"https://ghostery.net/home/offboarding",WTM_API:"https://whotracks.me/data/",ANTIPHISHING_BLOOMFILTER:"https://cdn.ghostery.net/anti-phishing/bloom_filter.json.gz",SUPPORT_URL:"https://www.ghostery.com/support/",PRIVACY_POLICY_URL:"https://www.ghostery.com/about-ghostery/privacy-statements/",NEW_TAB_URL:"/freshtab/home.html",channel:"CH80",MSGCHANNEL:"web-extension",URL_CHANGED_EVENT_DEBOUNCE:500,ATTRACK_TELEMETRY_PROVIDER:"hpnv2",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["de","at","ch","es","us","fr","nl","gb","it","be","se","dk","fi","cz","gr","hu","ro","no","ca","au","ru","ua","in","pl","jp","br","mx","cn","ar"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",telemetry:{demographics:{brand:"ghostery",name:"extension"}},HUMAN_WEB_LITE_COLLECTOR_VIA_PROXY:"https://collector-hpn.ghostery.net",HUMAN_WEB_LITE_COLLECTOR_DIRECT:"https://collector-hpn.ghostery.net",frameScriptWhitelist:[]},default_prefs:{"modules.human-web.enabled":!0,"modules.antitracking.enabled":!0,"modules.anti-phishing.enabled":!1,"modules.adblocker.enabled":!0,"modules.insights.enabled":!1,"cliqz-adb":1,attrackBloomFilter:!0,humanWeb:!0,"cliqz-anti-phishing":!0,"cliqz-anti-phishing-enabled":!0,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,telemetry:!1,attrackCookieTrustReferers:!0,"attrack.cookieMode":"ghostery"},bundles:["core/content-script.bundle.js","hpnv2/worker.wasm.bundle.js","hpnv2/worker.asmjs.bundle.js","human-web/rusha.bundle.js"],modules:["core","human-web","hpnv2","antitracking","webrequest-pipeline","adblocker","anolysis","anti-phishing","insights","hpn-lite","human-web-lite"],buildTargets:{firefox:52},environment:"production",isBeta:!1,EXTENSION_VERSION:"7.47.5",VERSION:"7.47.5"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=l;var n,s=(n=r(2))&&n.__esModule?n:{default:n},o=r(0),a=r(25),i=r(28);function c(e){window.console.error("[human-web] Exception caught:",e)}function l(e,t,r){const n=t.document;try{let e=null;if(e=n.querySelector("script"),e&&e.innerHTML.indexOf("location.replace")>-1){const e=n.querySelector("title").textContent;s.default.sendMessage({module:"human-web",action:"jsRedirect",args:[{message:{location:e,url:n.location.href}}]})}}catch(e){c(e)}try{let e="",t=!1;n.querySelector("#s0p1c0")&&(e=n.querySelector("#s0p1c0").href),n.querySelector("#tads .ads-ad")&&null===n.querySelector("#tads .ads-ad").offsetParent&&(t=!0);const s={type:"dom",ad:e,hidden:t};r.action("contentScriptTopAds",{message:s})}catch(e){c(e)}try{const e={},n=t.document;let s=0;const o={query:{element:"#rso",attribute:"data-async-context"},adSections:[".ads-ad",".pla-unit-container",".pla-hovercard-content-ellip",".cu-container tr"],0:{cu:".ad_cclk a[id^='s0p'],.ad_cclk a[id^='n1s0p'],.ad_cclk a[id^='s3p']",fu:".ad_cclk a[id^='vs0p'],.ad_cclk a[id^='vn1s0p'],.ad_cclk a[id^='vs3p']"},1:{cu:"a[id^='plaurlg']",fu:"a[id^='vplaurlg']"},2:{cu:"a[id^='plaurlh']",fu:"a[id^='vplaurlh']"},3:{cu:"a[id^='plaurlt']",fu:"a[id^='vplaurlt']"}},a=n.querySelector(o.query.element);let c="";if(a){c=a.getAttribute(o.query.attribute).replace("query:","");try{c=decodeURIComponent(c)}catch(e){}}o.adSections.forEach((t,r)=>{Array.prototype.slice.call(n.querySelectorAll(t)).forEach(t=>{const n=o[r].cu,a=o[r].fu,l=t.querySelector(n),u=t.querySelector(a);if(l&&u){const t=(0,i.normalizeAclkUrl)(l.href);e[t]={ts:Date.now(),query:c,furl:[u.getAttribute("data-preconnect-urls"),u.href]},s+=1}})}),s>0&&r.action("adClick",{ads:e})}catch(e){c(e)}}(0,o.registerContentScript)({module:"human-web",matches:["http://*/*","https://*/*"],js:[function(e,t,r){e.location.href;const n=r.app.modules["human-web"];function s(e){return t=>{n.action(e,{target:{baseURI:t.target.baseURI}})}}e.top===e&&e.addEventListener("DOMContentLoaded",()=>{l(0,e,n)});const o=(0,a.throttle)(e,s("hw:keypress"),250),i=(0,a.throttle)(e,s("hw:mousemove"),250),c=(0,a.throttle)(e,s("hw:scroll"),250),u=(0,a.throttle)(e,s("hw:copy"),250);e.addEventListener("keypress",o),e.addEventListener("mousemove",i),e.addEventListener("scroll",c),e.addEventListener("copy",u),e.addEventListener("unload",(function(t){if(!t||t.target===e.document){try{String(e)}catch(e){return}e.removeEventListener("keypress",o),e.removeEventListener("mousemove",i),e.removeEventListener("scroll",c),e.removeEventListener("copy",u)}}))}],allFrames:!0})},function(e,t,r){var n,s,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=[e],void 0===(o="function"==typeof(n=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",r="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(e.runtime.lastError):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},a=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,n,s)=>r.call(n,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},r={})=>{let n=Object.create(null),s={has:(t,r)=>r in e||r in n,get(s,u,m){if(u in n)return n[u];if(!(u in e))return;let d=e[u];if("function"==typeof d)if("function"==typeof t[u])d=i(e,e[u],t[u]);else if(c(r,u)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((s,a)=>{if(t.fallbackToNoCallback)try{r[e](...n,o({resolve:s,reject:a},t))}catch(o){console.warn(e+" API method doesn't seem to support the callback parameter, falling back to call it without a callback: ",o),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(r[e](...n),s()):r[e](...n,o({resolve:s,reject:a},t))})})(u,r[u]);d=i(e,e[u],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,u)||c(r,u)))d=l(d,t[u],r[u]);else{if(!c(r,"*"))return Object.defineProperty(n,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),d;d=l(d,t[u],r["*"])}return n[u]=d,d},set:(t,r,s,o)=>(r in n?n[r]=s:e[r]=s,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},u=Object.create(e);return new Proxy(u,s)},u=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}});let m=!1;const d=new s(e=>"function"!=typeof e?e:function(t,n,s){let o,a,i=!1,c=new Promise(e=>{o=function(t){m||(console.warn(r,(new Error).stack),m=!0),i=!0,e(t)}});try{a=e(t,n,o)}catch(e){a=Promise.reject(e)}const l=!0!==a&&(u=a)&&"object"==typeof u&&"function"==typeof u.then;var u;if(!0!==a&&!l&&!i)return!1;const d=e=>{e.then(e=>{s(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return d(l?a:c),!0}),g=({reject:r,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(e.runtime.lastError):s&&s.__mozWebExtensionPolyfillReject__?r(new Error(s.message)):n(s)},f=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,t)=>{const s=g.bind(null,{resolve:e,reject:t});n.push(s),r.sendMessage(...n)})},h={runtime:{onMessage:u(d),onMessageExternal:u(d),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},l(e,h,n)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=n(chrome)}else e.exports=browser})?n.apply(t,s):n)||(e.exports=o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,r){let n,s;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];const c=Date.now();n&&c<n+r?(e.clearTimeout(s),s=e.setTimeout(()=>{n=c,t(...a)},r)):(n=c,t(...a))}},t.debounce=function(e,t){let r=null;return t?function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];(0,o.clearTimeout)(r);const i=()=>{r=null,e(...s)};r=(0,o.setTimeout)(i,t)}:e},t.deadline=function(e,t){return Promise.race([(0,s.default)(t),e])},t.nextTick=c,t.nextIdle=function(){if("undefined"==typeof window||!window.requestIdleCallback)return c(()=>{});return new Promise(e=>{window.requestIdleCallback(e)})},t.withTimeout=l,t.tryPromise=function(e){return m.apply(this,arguments)};var n,s=(n=r(26))&&n.__esModule?n:{default:n},o=r(4);function a(e,t,r,n,s,o,a){try{var i=e[o](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,s)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function i(e){a(o,n,s,i,c,"next",e)}function c(e){a(o,n,s,i,c,"throw",e)}i(void 0)}))}}function c(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Promise.resolve().then(()=>e(...r))}function l(e,t){return u.apply(this,arguments)}function u(){return(u=i((function*(e,t){let r;try{return r=new Promise((e,r)=>{(0,o.setTimeout)(()=>r(new Error(`Timed out after ${t/1e3} seconds`)),t)}),yield Promise.race([e,r])}finally{(0,o.clearTimeout)(r)}}))).apply(this,arguments)}function m(){return(m=i((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;try{return yield l(e,t)}catch(e){return"Failed: "+e}}))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(t=>(0,n.setTimeout)(t,e))};var n=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInterval=t.clearTimeout=t.setInterval=t.setTimeout=void 0;t.setTimeout=function(){return("undefined"==typeof setTimeout?window.setTimeout.bind(window):setTimeout)(...arguments)};t.setInterval=function(){return("undefined"==typeof setInterval?window.setInterval.bind(window):setInterval)(...arguments)};t.clearTimeout=function(){return("undefined"==typeof clearTimeout?window.clearTimeout.bind(window):clearTimeout)(...arguments)};t.clearInterval=function(){return("undefined"==typeof clearInterval?window.clearInterval.bind(window):clearInterval)(...arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAclkUrl=function(e){const t=e.split("aclk?");if(2!==t.length)throw new Error('Expected Google pagead "aclk" URL. Instead got: '+e);return t[1].replace(/ved=.*&/,"").replace(/&q=&adurl=$/,"").replace(/&adurl=&q=$/,"")}},function(e,t,r){},function(e,t,r){"use strict";var n,s=(n=r(31))&&n.__esModule?n:{default:n};function o(e,t,r,n,s,o,a){try{var i=e[o](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,s)}(0,r(0).registerContentScript)({module:"adblocker",matches:["http://*/*","https://*/*"],matchAboutBlank:!0,allFrames:!0,js:[(e,t,r)=>{(0,s.default)(e,!0,function(){var e,t=(e=function*(e){return(yield r.app.modules.adblocker.action("getCosmeticsFilters",e))||{}},function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){o(a,n,s,i,c,"next",e)}function c(e){o(a,n,s,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())}]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.injectCosmetics}});var n=r(32)},function(e,t,r){"use strict";r.r(t),r.d(t,"injectCosmetics",(function(){return l}));var n=r(3);let s=!0,o=null;function a(){null!==o&&(o.stop(),o=null)}function i({classes:e,hrefs:t,ids:r,lifecycle:n}){return new Promise(s=>{chrome.runtime.sendMessage({action:"getCosmeticsFilters",classes:e,hrefs:t,ids:r,lifecycle:n},e=>{void 0!==e&&s(e)})})}function c(e,{active:t,scripts:r,styles:o}){if(!1===t)return s=!1,void a();if(s=!0,r)for(let t=0;t<r.length;t+=1)setTimeout(()=>Object(n.c)(r[t],e.document),0);o&&o.length>0&&setTimeout(()=>Object(n.b)(o,e.document),0)}function l(e,t=!0,r=i){r({lifecycle:"start",ids:[],classes:[],hrefs:[]}).then(t=>c(e,t)),e.addEventListener("DOMContentLoaded",()=>{o=new n.a(({classes:t,ids:n,hrefs:s})=>{r({classes:t,hrefs:s,ids:n,lifecycle:"dom-update"}).then(t=>c(e,t))}),o.queryAll(e),s&&t&&o.start(e)},{once:!0,passive:!0}),e.addEventListener("unload",a,{once:!0,passive:!0})}},function(e,t,r){"use strict";var n=r(0);const s=chrome.runtime.getURL("/modules/anti-phishing/phishing-warning.html?u=");(0,n.registerContentScript)({module:"anti-phishing",matches:["http://*/*","https://*/*"],js:[(e,t,r)=>{r.app.modules["anti-phishing"].action("isPhishingURL",e.location.href).then(t=>{let r=t.block,n=t.type;r&&"phishingURL"===n&&(e.location=`${s}${encodeURIComponent(e.location)}`)})}]})},function(e,t,r){"use strict";var n=r(0),s=r(4);function o(e){const t=document.location,r=t.host,n=t.hostname,s=t.pathname,o=t.protocol,a=performance.timing.domContentLoadedEventStart-performance.timing.requestStart||0;e.app.modules.insights.action("recordPageInfo",{domain:`${o}//${r}${s}`,host:n,timestamp:performance.timing.navigationStart,latency:a,pageTiming:{timing:{navigationStart:performance.timing.navigationStart,loadEventEnd:performance.timing.loadEventEnd}}})}(0,n.registerContentScript)({module:"insights",matches:["http://*/*","https://*/*"],js:[function(e,t,r){"complete"!==document.readyState?e.addEventListener("load",()=>{(0,s.setTimeout)(()=>{o(r)},1)}):o(r)}]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("html"!==n.window.document.documentElement.nodeName.toLowerCase())return;const e=new o.default;new Promise(e=>{void 0!==n.window.CLIQZ?e(n.window.CLIQZ):(n.window.runCliqz=e,s.default.sendMessage({module:"core",action:"status"}).then(e=>({app:e})).then(e,()=>{}))}).then(t=>{for(var r=0,o=Object.entries(t.app.modules);r<o.length;r++){const e=(i=o[r],l=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,s=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(s)throw o}}return r}(i,l)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=e[0];e[1].action=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return s.default.sendMessage({module:t,action:e,args:n})}}var i,l;e.setActionCallbacks((0,a.runContentScripts)(n.window,n.chrome,t)),n.window.addEventListener("unload",()=>{e.unload()},{once:!0})})};var n=r(15),s=i(r(2)),o=i(r(36)),a=r(0);function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(37)),s=o(r(2));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,s=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(s)throw o}}return r}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class u{constructor(){var e,t,r;r=5e3,(t="MAX_BUFFER_LEN")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this.buffer=[],this.onMessage=e=>this.buffer.length<this.MAX_BUFFER_LEN?new Promise((t,r)=>{this.buffer.push({message:e,resolve:t,reject:r})}):Promise.reject(new Error(`content-script actions buffer limit exceeded: ${this.buffer.length} ${this.MAX_BUFFER_LEN}`))}init(){s.default.onMessage.addListener(this.onMessage)}unload(){s.default.onMessage.removeListener(this.onMessage)}}t.default=class{constructor(){this.actions=null,this.messageHandlers=[new u];var e,t=i(this.messageHandlers);try{for(t.s();!(e=t.n()).done;){e.value.init()}}catch(e){t.e(e)}finally{t.f()}}unload(){var e,t=i(this.messageHandlers);try{for(t.s();!(e=t.n()).done;){e.value.unload()}}catch(e){t.e(e)}finally{t.f()}this.messageHandlers=[]}setActionCallbacks(e){const t=this.messageHandlers[0].buffer;this.unload();for(var r=0,s=Object.entries(e);r<s.length;r++){const e=a(s[r],2),l=e[0],u=e[1],m=new n.default(l,u);var o,c=i(t);try{for(c.s();!(o=c.n()).done;){const e=o.value,t=e.message,r=e.resolve,n=e.reject,s=m.onMessage(t);void 0!==s&&s.then(r).catch(n)}}catch(e){c.e(e)}finally{c.f()}m.init(),this.messageHandlers.push(m)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=r(2))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this.onMessage=r=>{if(r.module===e){const e=t[r.action];if(void 0!==e){let t=r.args||[];return void 0!==r.message&&(t=[r.message]),Promise.resolve(e(...t))}}}}init(){s.default.onMessage.addListener(this.onMessage)}unload(){s.default.onMessage.removeListener(this.onMessage)}}}]);